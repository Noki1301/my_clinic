{% extends 'base.html' %} {% block title %}Bosh Sahifa - MyClinic{% endblock %}
{% block content %}
<div class="container py-5">
	<div class="text-center mb-5">
		<h1 class="display-4 fw-bold">Bizning Malakali Shifokorlar</h1>
		<p class="lead text-muted">
			Sog'lig'ingizni ishonchli qo'llarga topshiring
		</p>
	</div>
	<div
		class="card shadow-sm mb-5 border-0 rounded-4"
		style="background: #f8f9fa"
	>
		<div class="card-body p-4">
			<form method="get" action="{% url 'home' %}">
				<div class="input-group input-group-lg">
					<span class="input-group-text bg-white border-0 text-primary">
						<i class="bi bi-search"></i>
					</span>

					<input
						type="text"
						name="q"
						class="form-control border-0 bg-white"
						placeholder="Shifokor ismi yoki mutaxassisligi (masalan: Xirurg)..."
						value="{{ search_query|default:'' }}"
						aria-label="Search"
					/>

					<button class="btn btn-primary px-4 rounded-end" type="submit">
						Qidirish
					</button>
				</div>
			</form>

			<div class="mt-4 d-flex flex-wrap gap-2 justify-content-center">
				<a
					href="{% url 'home' %}"
					class="btn btn-outline-secondary rounded-pill btn-sm"
					>Barchasi</a
				>
				<a
					href="?spec=Stomatolog"
					class="btn btn-outline-primary rounded-pill btn-sm"
					>ğŸ¦· Stomatolog</a
				>
				<a
					href="?spec=Kardiolog"
					class="btn btn-outline-danger rounded-pill btn-sm"
					>â¤ï¸ Kardiolog</a
				>
				<a
					href="?spec=Xirurg"
					class="btn btn-outline-success rounded-pill btn-sm"
					>ğŸ”ª Xirurg</a
				>
				<a
					href="?spec=Dermatolog"
					class="btn btn-outline-warning rounded-pill btn-sm"
					>ğŸ§´ Dermatolog</a
				>
				<a href="?spec=Pediatr" class="btn btn-outline-info rounded-pill btn-sm"
					>ğŸ‘¶ Pediatr</a
				>
				<a
					href="?spec=Terapevt"
					class="btn btn-outline-secondary rounded-pill btn-sm"
					>ğŸ©º Terapevt</a
				>
			</div>
		</div>
	</div>

	<p class="text-muted mb-4">
		Topildi: <strong>{{ count }}</strong> ta shifokor
	</p>
	<div class="row">
		{% for doctor in doctors %}
		<div class="col-md-4 mb-4">
			<div class="card shadow-sm h-100 border-0">
				<div style="height: 250px; overflow: hidden">
					{% if doctor.image %}
					<img
						src="{{ doctor.image.url }}"
						class="w-100 h-100"
						style="object-fit: cover"
						alt="{{ doctor.first_name }}"
					/>
					{% else %}
					<div
						class="bg-secondary text-white w-100 h-100 d-flex align-items-center justify-content-center"
					>
						<span class="fs-1">ğŸ‘¨â€âš•ï¸</span>
					</div>
					{% endif %}
				</div>

				<div class="card-body">
					<h5 class="card-title fw-bold">
						{{ doctor.first_name }} {{ doctor.last_name }}
					</h5>
					<span class="badge bg-info text-dark mb-2"
						>{{ doctor.get_speciality_display }}</span
					>
					<p class="card-text text-muted small">
						{{ doctor.bio|truncatewords:15 }}
					</p>

					<div class="d-flex justify-content-between align-items-center mt-3">
						<span class="fs-5 fw-bold text-primary"
							>{{ doctor.price }} so'm</span
						>
						<a
							href="{% url 'doctor_detail' doctor.id %}"
							class="btn btn-outline-primary btn-sm"
							>Batafsil</a
						>
					</div>
				</div>
				<div class="card-footer bg-transparent border-top-0">
					<a
						href="{% url 'book_appointment' doctor.id %}"
						class="btn btn-primary w-100"
						>ğŸ“… Qabulga yozilish</a
					>
				</div>
			</div>
		</div>
		{% empty %}
		<div class="col-12 text-center">
			<p class="alert alert-warning">Hozircha shifokorlar ro'yxati bo'sh.</p>
		</div>
		{% endfor %}
	</div>
</div>
{% endblock %}
